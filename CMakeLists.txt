# â¬…ï¸ Minimum required version of CMake
cmake_minimum_required(VERSION 3.10)

# â¬…ï¸ Project name
project(RoboBankPortfolioProject)

# â¬…ï¸ Set the C++ standard to use
set(CMAKE_CXX_STANDARD 17)

# âœ… Make Google Test use the same runtime library as the rest of the project
# This avoids linking issues on Windows (especially with Visual Studio)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)

# =========================
# ğŸ“Œ Add Google Test to the project
# =========================
# â¬…ï¸ Add the googletest folder as a subdirectory so CMake builds
# gtest and gtest_main libraries along with the project
add_subdirectory(googletest)

# =========================
# ğŸ“Œ Main Project Executable
# =========================
# â¬…ï¸ Define the main executable for the actual application
add_executable(RoboBank
    main.cpp
    cal.cpp
    portfolio.cpp
)

# =========================
# ğŸ“Œ Google Test Setup
# =========================

# â¬…ï¸ Enable testing support in CMake
enable_testing()

# â¬…ï¸ Create a test executable that includes:
# - test.cpp (test file)
# - other project source files needed for the tests
add_executable(RoboBankTests
    test.cpp
    cal.cpp
    portfolio.cpp
)

# â¬…ï¸ Link the test executable with Google Test libraries
target_link_libraries(RoboBankTests PRIVATE gtest gtest_main)

# â¬…ï¸ Register the test with CTest so we can run it using `ctest`
add_test(NAME AllTests COMMAND RoboBankTests)
