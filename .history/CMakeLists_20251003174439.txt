cmake_minimum_required(VERSION 3.10)
project(RoboBankPortfolioProject)

set(CMAKE_CXX_STANDARD 17)

# âœ… Ø®Ù„ÙŠ GoogleTest ÙŠØ³ØªØ®Ø¯Ù… Ù†ÙØ³ runtime Ø²ÙŠ Ø¨Ù‚ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)

# Ø£Ø¶Ù Google Test ÙƒÙ…Ø¬Ù„Ø¯ ÙØ±Ø¹ÙŠ
add_subdirectory(googletest)

# =========================
# ğŸ“Œ Ø£ÙˆÙ„Ø§Ù‹: Ø§Ù„Ù€ Executable Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ù…Ø´Ø±ÙˆØ¹
# =========================
add_executable(RoboBank
    main.cpp
    cal.cpp
    portfolio.cpp
)

# =========================
# ğŸ“Œ Ø«Ø§Ù†ÙŠØ§Ù‹: Ø¥Ø¹Ø¯Ø§Ø¯ Google Test
# =========================
enable_testing()

# Ø£Ø¶Ù Ù…Ù„Ù Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± + Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù„ÙŠ Ù‡Ù†Ø®ØªØ¨Ø±Ù‡Ø§
add_executable(runTests
    test.cpp
    cal.cpp
    portfolio.cpp
)

# Ø§Ø±Ø¨Ø· Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ø¹ gtest Ùˆ gtest_main
target_link_libraries(runTests PRIVATE gtest gtest_main)

# Ø³Ø¬Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¹ CTest
add_test(NAME AllTests COMMAND runTests)
